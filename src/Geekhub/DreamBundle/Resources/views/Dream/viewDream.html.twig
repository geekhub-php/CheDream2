{% extends 'GeekhubResourceBundle::layout.html.twig' %}

{% block stylesheets %}
    <link href="{{ asset('css/dream_css.min.css') }}" rel="stylesheet">
    <link href="{{ asset('css/dream_gallery.min.css') }}" rel="stylesheet">
{% endblock %}
{% block content %}

    {{ include('GeekhubDreamBundle:includes:showDreamMediaBlock.html.twig', {dream: dream}) }}

    <hr class="show-hr">

    {{ include('GeekhubDreamBundle:includes:showDreamContributDescript.html.twig', { dream: dream } ) }}

    <div class="row">
        <div class="col-md-4">
            {# Resources start #}
                {{ include('GeekhubDreamBundle:includes:showDreamResource.html.twig', {dream: dream}) }}
            {# Resources end #}
        </div>

        <div class="col-md-8">

            {# participants start #}
                {{ include('GeekhubDreamBundle:includes:showDreamParticipants.html.twig', {dream: dream}) }}
            {# participants end #}
            <br/>
            {# comments start #}
                {{ include('GeekhubDreamBundle:includes:showDreamComments.html.twig', {dream: dream}) }}
            {# comments end #}

        </div>

    </div>

{% endblock %}
{% block javascript %}
    {{ parent() }}
    <script src="{{ asset('js/dream_gallery.min.js') }}"></script>
    <script>
        var finFormHide = function(){
            $('#finFormContributor').hide();
        };
        var equipFormHide = function(){
            $('#equipFormContributor').hide();
        };
        var workFormHide = function(){
            $('#workFormContributor').hide();
        };

        var finFormShow = function() {
            $('#finFormContributor').fadeIn(500).show();
        };
        var equipFormShow = function() {
            $('#equipFormContributor').fadeIn(500).show();
        };
        var workFormShow = function() {
            $('#workFormContributor').fadeIn(500).show();
        };

        $(document).ready(function(){
            $('#video object').get(0).width='100%';
            $('#video object').get(0).height=250;
            $('#video object embed').get(0).width='100%';
            $('#video object embed').get(0).height=250;
//            $('#video object embed').attr({wmode:"opaque"});
            finFormHide();
            equipFormHide();
            workFormHide();
        });

        document.getElementById('links').onclick = function (event) {
            event = event || window.event;
            var target = event.target || event.srcElement,
                    link = target.src ? target.parentNode : target,
                    options = {index: link, event: event},
                    links = this.getElementsByTagName('a');
            blueimp.Gallery(links, options);
        };

        $('#finFormContributorShow').click(function(){
            finFormShow();
            equipFormHide();
            workFormHide();
        });
        $('#equipFormContributorShow').click(function(){
            finFormHide();
            equipFormShow();
            workFormHide();
        });

        $('#workFormContributorShow').click(function(){
            finFormHide();
            equipFormHide();
            workFormShow();
        });
        $('#finButCancel').click(function(){
            finFormHide();
        });
        $('#equipButCancel').click(function(){
            equipFormHide();
        });
        $('#workButCancel').click(function(){
            workFormHide();
        });
    </script>
{% endblock %}
