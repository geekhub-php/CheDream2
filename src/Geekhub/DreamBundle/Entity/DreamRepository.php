<?php

namespace Geekhub\DreamBundle\Entity;

use Doctrine\ORM\EntityRepository;

/**
 * DreamsRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class DreamRepository extends EntityRepository
{

	public function findNewDreams($limit, $offset)
    {
        $em = $this->getEntityManager();
       $query = $em->createQuery(
            'SELECT d FROM GeekhubDreamBundle:Dream d
            ORDER BY d.createdAt'
        )->setMaxResults($limit)
         ->setFirstResult($offset);

        return $query->getResult();
    }

	public function findPopularDreams($limit, $offset)
    {
        $em = $this->getEntityManager();
       $query = $em->createQuery(
            'SELECT d
            FROM GeekhubDreamBundle:Dream d
            ORDER BY d.createdAt desc'
        )->setMaxResults($limit)
         ->setFirstResult($offset);

        return $query->getResult(); //??? doesnt work
    }
    public function findLimitedDreamsByStatus($status, $limit, $offset)
    {
        $em = $this->getEntityManager();
       $query = $em->createQuery(
            'SELECT d FROM GeekhubDreamBundle:Dream d
            WHERE d.currentStatus = :status
            ORDER BY d.createdAt'
        )->setMaxResults($limit)
         ->setFirstResult($offset)
         ->setParameter('status', $status);

        return $query->getResult();
    }

}
